<!doctype html>
<html lang="hu">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Java 17→24 újdonságok – verziónként, lapozható</title>
    <style>
        :root { --bg:#0f172a; --fg:#e5e7eb; --muted:#94a3b8; --accent:#22d3ee; --card:#111827; }
        *{box-sizing:border-box}
        body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;background:var(--bg);color:var(--fg)}
        .wrap{max-width:1000px;margin:0 auto;padding:24px}
        header{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:12px}
        header h1{font-size:clamp(18px,3vw,22px);margin:0;font-weight:600}
        .card{background:#0b1220;border:1px solid #1f2937;border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.35);min-height:50vh}
        .ver{display:flex;align-items:center;gap:10px}
        .badge{display:inline-block;padding:2px 10px;border:1px solid #334155;border-radius:999px;font-size:12px;color:#a7f3d0;background:rgba(34,211,238,.06)}
        h2{margin:0 0 8px;font-size:clamp(22px,3.6vw,30px)}
        h3{margin:18px 0 8px;font-size:16px;color:#a5b4fc}
        .feat{border-left:3px solid #334155;padding-left:10px;margin:14px 0}
        .meta{color:var(--muted);font-size:14px;margin-bottom:10px}
        pre{overflow:auto;background:#0b1220;border:1px solid #1f2937;border-radius:12px;padding:12px;margin:10px 0;font-size:13px;line-height:1.45}
        code{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace}
        .nav{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:16px}
        .btn{appearance:none;border:1px solid #334155;background:#111827;color:var(--fg);padding:10px 14px;border-radius:12px;font-weight:600;cursor:pointer}
        .btn[disabled]{opacity:.4;cursor:not-allowed}
        .btn:focus{outline:2px solid var(--accent);outline-offset:2px}
        .idx{color:var(--muted);font-size:14px}
        ul{margin:0 0 8px 18px}
    </style>
</head>
<body>
<div class="wrap">
    <header>
        <h1>Java 17 → 24: újdonságok verziónként</h1>
        <div class="idx" id="index">1 / 1</div>
    </header>

    <div class="card" id="slide"></div>

    <div class="nav">
        <button class="btn" id="prev">⟵ Előző</button>
        <div class="idx" id="title"></div>
        <button class="btn" id="next">Következő ⟶</button>
    </div>
</div>

<script>
    // Egy oldal = egy Java verzió, rajta az összes fő újdonság
    const versions = [
        {
            version: "Java 17 (LTS, bázis)",
            note: "Kiinduló pontként: a prezentáció a 17 utáni újdonságokra fókuszál. Ezen a lapon nincs felsorolás.",
            features: []
        },
        {
            version: "Java 18",
            features: [
                {
                    title: "UTF-8 az alapértelmezett (JEP 400)",
                    why: "Platformfüggetlen szövegkezelés, kevesebb encoding-hiba.",
                    now: `// 18+:
import java.nio.file.*;
Files.writeString(Path.of("ki.txt"), "árvíztűrő tükörfúrógép");
var s = Files.readString(Path.of("ki.txt"));`,
                    before: `Files.write(Path.of("ki.txt"),
  "árvíztűrő tükörfúrógép".getBytes(java.nio.charset.StandardCharsets.UTF_8));`
                },
                {
                    title: "Egyszerű beépített webszerver (JEP 408)",
                    why: "Zero-dep statikus kiszolgálás fejlesztéshez/POC-hoz.",
                    now: `# Terminálból:
jwebserver -p 8080 -d ./public`,
                    before: `// Saját mini HTTP szerver vagy külső eszköz indítása`
                }
            ]
        },
        {
            version: "Java 19",
            features: [
                {
                    title: "Virtual Threads – preview (JEP 425)",
                    why: "Olcsó szálak, magas áteresztés blokkoló stílussal.",
                    now: `try (var exec = java.util.concurrent.Executors.newVirtualThreadPerTaskExecutor()) {
  exec.submit(() -> httpCall());
}`,
                    before: `var exec = java.util.concurrent.Executors.newFixedThreadPool(200);
exec.submit(() -> httpCall());`
                },
                {
                    title: "Record Patterns – preview (JEP 405)",
                    why: "Tömör adatbontás rekordoknál.",
                    now: `record User(String n,int a){}
Object o = new User("Ada",28);
if (o instanceof User(String name,int age)) {}`,
                    before: `if (o instanceof User u){ var name=u.n(); var age=u.a(); }`
                }
            ]
        },
        {
            version: "Java 20",
            features: [
                {
                    title: "Record Patterns – 2. preview (JEP 432)",
                    why: "Stabilizálódó mintázás.",
                    now: `if (o instanceof User(String n,int a) && a>=18) {}`,
                    before: `if(o instanceof User u){ if(u.a()>=18){ var n=u.n(); } }`
                },
                {
                    title: "Pattern Matching for switch – 4. preview (JEP 433)",
                    why: "Kevesebb cast/if.",
                    now: `String fmt(Object o){ return switch(o){ default->""; }; }`,
                    before: `if(o instanceof String s){ /* ... */ } else { /* ... */ }`
                },
                {
                    title: "Scoped Values – inkubátor",
                    why: "Immutable kontextus ThreadLocal helyett.",
                    now: `static final var CTX = jdk.incubator.concurrent.ScopedValue.newInstance();`,
                    before: `static final ThreadLocal<UserCtx> CTX = new ThreadLocal<>();`
                }
            ]
        },
        {
            version: "Java 21 (LTS)",
            features: [
                {
                    title: "Virtual Threads – végleges (JEP 444)",
                    why: "Szál-per-kérés egyszerűen, nagy áteresztéssel.",
                    now: `try (var exec = java.util.concurrent.Executors.newVirtualThreadPerTaskExecutor()) {
  var fs = java.util.stream.IntStream.range(0,10_000)
    .mapToObj(i -> exec.submit(() -> serviceCall(i)))
    .toList();
  for (var f: fs) f.get();
}`,
                    before: `var exec = java.util.concurrent.Executors.newFixedThreadPool(200);`
                },
                {
                    title: "Pattern Matching for switch – végleges (JEP 441)",
                    why: "Típusos minták, őrfeltételek, kimerítettség.",
                    now: `return switch(o){ case String s && s.length()>10 -> s; default -> ""; };`,
                    before: `if(o instanceof String s && s.length()>10){ return s; } return "";`
                },
                {
                    title: "Record Patterns – végleges (JEP 440)",
                    why: "Rekord komponensek közvetlen kinyerése.",
                    now: `if(o instanceof User(String n,int a)){}`,
                    before: `if(o instanceof User u){ var n=u.n(); var a=u.a(); }`
                },
                {
                    title: "Sequenced Collections (JEP 431)",
                    why: "Egységes elöl/hátul műveletek, reversed nézet.",
                    now: `java.util.SequencedMap<Integer,String> m = new java.util.LinkedHashMap<>();
m.putFirst(1,"a"); m.putLast(2,"b"); var rev = m.reversed();`,
                    before: `Deque/LinkedList/LinkedHashMap-specifikus megoldások`
                },
                {
                    title: "String Templates – 1. preview (JEP 430)",
                    why: "Típusos, potenciálisan injekció-védett templating.",
                    now: `import static java.lang.StringTemplate.STR; var msg = STR."Hello,{name}!";`,
                    before: `String msg = String.format("Hello, %s!", name);`
                },
                {
                    title: "Scoped Values – preview",
                    why: "Biztonságos kontextus-átadás virtual threadekkel is.",
                    now: `ScopedValue.where(CTX, u).run(() -> service(CTX.get()));`,
                    before: `ThreadLocal élettartam-kezelés`
                }
            ]
        },
        {
            version: "Java 22",
            features: [
                {
                    title: "Foreign Function & Memory API – végleges (JEP 454)",
                    why: "Native hívás/memória JNI nélkül.",
                    now: `Linker l=Linker.nativeLinker(); /* strlen példa */`,
                    before: `JNI header/ENV kezelés`
                },
                {
                    title: "Unnamed Variables & Patterns – végleges (JEP 456)",
                    why: "_ ahol nem kell a név/érték.",
                    now: `try{ }catch(java.io.IOException _){ }`,
                    before: `try{ }catch(java.io.IOException ignored){ }`
                },
                {
                    title: "Stream Gatherers – 1. preview (JEP 461)",
                    why: "Saját köztes műveletek a pipeline-ban.",
                    now: `Stream.of(1,2,3).gather(new MyGatherer())`,
                    before: `Collector + kézi állapot`
                },
                {
                    title: "String Templates – 2. preview",
                    why: "További csiszolások.",
                    now: `var s = STR."{x}+{y}={x+y}";`,
                    before: `String.format(...)`
                }
            ]
        },
        {
            version: "Java 23",
            features: [
                {
                    title: "Javadoc Markdown (JEP 467)",
                    why: "Markdown fejlécek, listák, kódblokkok.",
                    now: `/**\n * # Cím\n * - Pont\n * \n */`,
                    before: `/** <h1>Cím</h1> <ul><li>Pont</li></ul> */`
                },
                {
                    title: "Module Import Declarations – preview (JEP 476)",
                    why: "Modul-szintű import (előnézet).",
                    now: `import module java.util;`,
                    before: `import java.util.List; import java.util.Map; ...`
                },
                {
                    title: "String Templates – 3. preview (JEP 465)",
                    why: "Finomhangolások.",
                    now: `var msg = STR."Hello,{user}!";`,
                    before: `String.format(...)`
                },
                {
                    title: "Class-File API – 2. preview (JEP 466)",
                    why: "Szabványos bytecode API felé vezető lépés.",
                    now: `var cf = jdk.classfile.ClassFile.of();`,
                    before: `ASM/ByteBuddy`
                }
            ]
        },
        {
            version: "Java 24",
            features: [
                {
                    title: "Class-File API – végleges (JEP 484)",
                    why: ".class olvasás/írás/átalakítás hivatalos API-val.",
                    now: `var cf = jdk.classfile.ClassFile.of().parse(bytes);`,
                    before: `ASM/ByteBuddy/belső API-k`
                },
                {
                    title: "Stream Gatherers – végleges (JEP 485)",
                    why: "Saját köztes műveletek standard módon.",
                    now: `Stream.of(1,2,3,4).gather(new MyGatherer())`,
                    before: `Collector + kézi állapot`
                },
                {
                    title: "Key Derivation Function API – preview (JEP 478)",
                    why: "Egységes KDF (PBKDF2/HKDF) API.",
                    now: `var kdf = java.security.kdf.KeyDerivationFunction.getInstance("PBKDF2WithHmacSHA256");`,
                    before: `SecretKeyFactory + PBEKeySpec`
                },
                {
                    title: "Compact Object Headers – kísérleti (JEP 450)",
                    why: "Kisebb memória-lábnyom objektumfejléccel.",
                    now: `# futtatáskor\njava -XX:+UseCompactObjectHeaders -jar app.jar`,
                    before: `GC/heap tuning`
                }
            ]
        }
    ];

    const slideEl = document.getElementById('slide');
    const idxEl = document.getElementById('index');
    const titleEl = document.getElementById('title');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    let i = 0;

    function esc(s){
        return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
    }

    function featureHtml(f){
        return `
        <div class="feat">
          <h3>${f.title}</h3>
          <div class="meta">Miért jó? ${esc(f.why)}</div>
          <div>
            <div class="meta">ÚJ</div>
            <pre><code>${esc(f.now)}</code></pre>
          </div>
          <div>
            <div class="meta">Korábban</div>
            <pre><code>${esc(f.before)}</code></pre>
          </div>
        </div>`;
    }

    function render(){
        const v = versions[i];
        const feats = (v.features && v.features.length)
            ? v.features.map(featureHtml).join('')
            : `<div class="meta">${v.note || '—'}</div>`;
        slideEl.innerHTML = `
        <div class="ver">
          <h2>${v.version}</h2>
          <span class="badge">${i+1}/${versions.length}</span>
        </div>
        ${feats}
      `;
        idxEl.textContent = `${i+1} / ${versions.length}`;
        titleEl.textContent = v.version;
        prevBtn.disabled = i === 0;
        nextBtn.disabled = i === versions.length - 1;
    }

    function next(){ if(i < versions.length - 1){ i++; render(); } }
    function prev(){ if(i > 0){ i--; render(); } }

    nextBtn.addEventListener('click', next);
    prevBtn.addEventListener('click', prev);
    window.addEventListener('keydown', (e)=>{
        if (e.key === 'ArrowRight') next();
        if (e.key === 'ArrowLeft') prev();
    });

    render();
</script>
</body>
</html>